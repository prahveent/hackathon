<div class="cart-container">
  <!-- Navigation Header -->
  <div class="nav-header">
    <div class="nav-content">
      <h1>SmartCart</h1>
      <div class="nav-links">
        <button class="nav-btn" (click)="continueShopping()">Continue Shopping</button>
        <button class="nav-btn" routerLink="/login">Login</button>
      </div>
    </div>
  </div>

  <div class="cart-content">
    <div class="cart-main">
      <h2 class="cart-title">Shopping Cart</h2>

      <!-- Empty Cart State -->
      <div class="empty-cart" *ngIf="cart.items.length === 0">
        <div class="empty-cart-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
        </div>
        <h3>Your cart is empty</h3>
        <p>Add some products to get started!</p>
        <button class="continue-shopping-btn" (click)="continueShopping()">
          Browse Products
        </button>
      </div>

      <!-- Cart Items -->
      <div class="cart-items" *ngIf="cart.items.length > 0">
        <div class="cart-item" *ngFor="let item of cart.items; trackBy: trackByItemId">
          <div class="item-image">
            <img 
              [src]="item.productImage || 'https://picsum.photos/100/100?random=999'" 
              [alt]="item.productName"
              (error)="onImageError($event)"
            />
          </div>

          <div class="item-details">
            <h4 class="item-name">{{ item.productName }}</h4>
            <div class="item-price">
              <span class="current-price">{{ formatPrice(item.price) }}</span>
              <span class="original-price" *ngIf="item.originalPrice && item.originalPrice > item.price">
                {{ formatPrice(item.originalPrice) }}
              </span>
            </div>
            <div class="stock-status" [class.out-of-stock]="!item.isInStock">
              {{ item.isInStock ? 'In Stock' : 'Out of Stock' }}
            </div>
          </div>

          <div class="item-quantity">
            <label for="qty-{{ item.id }}">Qty:</label>
            <div class="quantity-controls">
              <button 
                class="qty-btn"
                (click)="updateQuantity(item, item.quantity - 1)"
                [disabled]="item.quantity <= 1"
              >
                -
              </button>
              <input 
                type="number" 
                [id]="'qty-' + item.id"
                [value]="item.quantity"
                (change)="onQuantityInputChange(item, $event)"
                min="1"
                [max]="item.maxQuantity || 99"
                class="qty-input"
              />
              <button 
                class="qty-btn"
                (click)="updateQuantity(item, item.quantity + 1)"
                [disabled]="item.quantity >= (item.maxQuantity || 99)"
              >
                +
              </button>
            </div>
          </div>

          <div class="item-total">
            {{ formatPrice(getItemTotal(item)) }}
          </div>

          <div class="item-actions">
            <button class="remove-btn" (click)="removeItem(item)" title="Remove item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <polyline points="3,6 5,6 21,6"/>
                <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Cart Actions -->
      <div class="cart-actions" *ngIf="cart.items.length > 0">
        <button class="clear-cart-btn" (click)="clearCart()">Clear Cart</button>
        <button class="continue-shopping-btn" (click)="continueShopping()">Continue Shopping</button>
      </div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary" *ngIf="cart.items.length > 0">
      <h3>Order Summary</h3>
      
      <div class="summary-line">
        <span>Items ({{ cart.totalItems }}):</span>
        <span>{{ formatPrice(cart.subtotal) }}</span>
      </div>
      
      <div class="summary-line">
        <span>Shipping:</span>
        <span>FREE</span>
      </div>
      
      <div class="summary-line total">
        <span>Total:</span>
        <span>{{ formatPrice(cart.total) }}</span>
      </div>
      
      <button class="checkout-btn" (click)="proceedToCheckout()">
        Proceed to Checkout
      </button>
      
      <div class="security-info">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <circle cx="12" cy="16" r="1"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span>Secure checkout</span>
      </div>
    </div>
  </div>
</div> 